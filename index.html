<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sacred Million Dollar Activation - Blessing Pages Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Georgia, serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #ffffff;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1, .header h2 {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: #ffd700;
        }

        .controls {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            color: #ffd700;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .control-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ffd700;
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-family: Georgia, serif;
        }

        .blessing-editor {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .blessing-card {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid #ffd700;
            border-radius: 10px;
            padding: 15px;
        }

        .blessing-card label {
            color: #ffd700;
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .blessing-card textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            border: 1px solid #ffd700;
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-family: Georgia, serif;
            resize: vertical;
        }

        .cases-section {
            background: rgba(255, 165, 0, 0.1);
            border: 2px solid #ffa500;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .cases-section h3 {
            color: #ffa500;
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
        }

        .cases-editor {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .case-card {
            background: rgba(255, 165, 0, 0.1);
            border: 1px solid #ffa500;
            border-radius: 10px;
            padding: 15px;
        }

        .case-card label {
            color: #ffa500;
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .case-card textarea {
            width: 100%;
            height: 120px;
            padding: 10px;
            border: 1px solid #ffa500;
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-family: Georgia, serif;
            resize: vertical;
            font-size: 12px;
        }

        .generate-btn {
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 30px auto;
            padding: 15px 30px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #1a1a2e;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: Georgia, serif;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.3);
        }

        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading-message {
            text-align: center;
            color: #ffd700;
            font-style: italic;
            margin-top: 20px;
            display: none;
        }

        .progress-bar {
            width: 100%;
            max-width: 400px;
            height: 10px;
            background-color: rgba(255, 215, 0, 0.2);
            border-radius: 5px;
            margin: 20px auto;
            overflow: hidden;
            display: none;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            width: 0%;
            transition: width 0.3s ease;
        }

        .error-message {
            background-color: rgba(255, 0, 0, 0.1);
            border: 1px solid #ff6b6b;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            color: #ff6b6b;
            text-align: center;
            display: none;
        }

        .success-message {
            background-color: rgba(0, 255, 0, 0.1);
            border: 1px solid #51cf66;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            color: #51cf66;
            text-align: center;
            display: none;
        }

        .preview-section {
            margin-top: 30px;
            text-align: center;
        }

        .preview-btn {
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid #ffd700;
            color: #ffd700;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            margin-right: 10px;
            font-family: Georgia, serif;
        }

        .preview-btn:hover {
            background: rgba(255, 215, 0, 0.3);
        }

        .page-preview {
            display: none;
            background: white;
            color: black;
            padding: 20px;
            margin: 20px auto;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚≠ê Sacred Million Dollar Activation ‚≠ê</h1>
            <h2>Blessing Pages Generator</h2>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="whatsapp">WhatsApp Number (optional):</label>
                <input type="text" id="whatsapp" placeholder="e.g., +40 123 456 789">
            </div>
            <div class="control-group">
                <label for="email">Email:</label>
                <input type="text" id="email" value="info@draculamystictour.com">
            </div>
        </div>

        <div class="error-message" id="errorMessage"></div>
        <div class="success-message" id="successMessage"></div>

        <div class="blessing-editor" id="blessingEditor">
            <!-- Blessing cards will be generated here -->
        </div>

        <div class="cases-section">
            <h3>üéØ Bottom Page Cases (5 different templates will rotate automatically)</h3>
            <div class="cases-editor" id="casesEditor">
                <!-- Case cards will be generated here -->
            </div>
        </div>

        <div class="preview-section">
            <button class="preview-btn" onclick="previewPage(1)">Preview Page 1</button>
            <button class="preview-btn" onclick="previewPage(15)">Preview Page 15</button>
            <button class="preview-btn" onclick="previewPage(30)">Preview Page 30</button>
        </div>

        <div class="page-preview" id="pagePreview"></div>

        <button class="generate-btn" onclick="generatePDF()" id="generateBtn">
            ‚ú® Generate Sacred PDF (30 Pages) ‚ú®
        </button>

        <div class="loading-message" id="loadingMessage">
            ‚ú® Creating page <span id="currentPage">1</span> of 30... ‚ú®
        </div>

        <div class="progress-bar" id="progressBar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
    </div>

    <script>
        const { jsPDF } = window.jspdf;
        
        const daysOfWeek = ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY'];
        
        const defaultBlessings = [
            "The 7th seal of Solomon's prosperity opens for you today. Ancient rivers of gold flow toward your soul.",
            "Sacred energies of my canonized ancestor activate your prosperity consciousness now. You are chosen.",
            "Divine abundance seeks you through bloodlines of power. Write your intention and let ancient wealth find you.",
            "The Orthodox mysteries whisper your name. Today, millionaire frequency aligns with your aura.",
            "Angelic forces of my lineage surround your finances. Supernatural breakthrough incoming.",
            "Sacred flames of abundance ignite within your spirit. The wealth of centuries flows through you now.",
            "Ancient prosperity codes embedded in your DNA activate today. Your millionaire destiny awakens.",
            "The golden thread of my bloodline connects to your soul. Infinite abundance channels through this sacred link.",
            "Celestial vaults of prosperity unlock for your spirit. Divine wealth streams descend upon you.",
            "The sacred fire of financial transformation burns within you. Old money blocks dissolve completely.",
            "Mystical forces align to manifest your deepest wealth desires. The universe conspires for your abundance.",
            "Ancestral wealth wisdom flows through your consciousness. Ancient secrets of prosperity reveal themselves.",
            "The Orthodox cross of abundance blesses your financial path. Sacred protection surrounds your money flow.",
            "Divine money magnetism awakens in your aura. You become an irresistible attractor of wealth.",
            "The sacred number of your birth date unlocks hidden treasure chambers. Abundance seeks you actively.",
            "Angelic guardians of prosperity take position around you. Your wealth protection is now complete.",
            "The mystical key to unlimited abundance turns in your favor. All financial doors open before you.",
            "Sacred geometry of wealth aligns with your life purpose. Your prosperity path becomes crystal clear.",
            "The golden light of my lineage illuminates your money consciousness. Millionaire thoughts flood your mind.",
            "Ancient prosperity rituals activate through your daily practice. Every action multiplies your wealth potential.",
            "The sacred waters of abundance cleanse your financial karma. Pure prosperity energy flows freely now.",
            "Divine intervention manifests through unexpected money opportunities. Your breakthrough moment has arrived.",
            "The mystical rose of prosperity blooms in your heart. Love and abundance merge in perfect harmony.",
            "Sacred numerology of your soul reveals hidden wealth patterns. Your unique abundance code activates today.",
            "The Orthodox bell of prosperity rings for your awakening. Divine timing aligns with your money goals.",
            "Celestial merchants of abundance gather around your spirit. Supernatural business opportunities multiply rapidly.",
            "The sacred scroll of your wealth destiny unrolls before you. Every step leads to greater prosperity.",
            "Ancient alchemy transforms your relationship with money. Lead thoughts become golden manifestations.",
            "The mystical crown of financial sovereignty rests upon your head. You rule your abundance kingdom now.",
            "Divine completion of your prosperity cycle draws near. The ultimate money breakthrough crystallizes within reach."
        ];

        const defaultCases = [
            // Template 1 - Business Women
            `*** RECENT SACRED CONFIRMATIONS:
"Day 8 brought me a $25K business contract!" - Jennifer M., CEO, California
"Maria's energy cleared my money blocks instantly" - Sarah K., Entrepreneur

*** YOUR PERSONAL BREAKTHROUGH AWAITS:
Custom Prosperity Activation designed for YOUR exact energy signature`,
            
            // Template 2 - Families/Moms
            `*** SACRED FAMILY TRANSFORMATIONS:
"My husband got promoted after I started this practice" - Lisa R., Texas
"Unexpected $5K came right when we needed it for kids' school" - Maria D., Ohio

*** READY FOR YOUR FAMILY'S ABUNDANCE SHIFT?
Personal Energy Reading & Wealth Activation for Your Household`,
            
            // Template 3 - Young People
            `*** MILLENNIAL MONEY MIRACLES:
"Student loans disappeared through mysterious refund" - Ashley B., 28, NYC
"Got dream job offer same day I completed page 15" - Tyler M., 24, LA

*** YOUR GENERATIONAL WEALTH STARTS NOW:
Personalized Abundance Activation for Your Life Path Number`,
            
            // Template 4 - Spiritual Seekers
            `*** DIVINE INTERVENTION REPORTS:
"The universe sent me $12K through a forgotten inheritance" - Michael S., Arizona
"My chakras opened and money started flowing immediately" - Crystal W., Oregon

*** YOUR SOUL'S ABUNDANCE CODE AWAITS:
Personal Akashic Records Reading & Prosperity Activation`,
            
            // Template 5 - General Success
            `*** BREAKTHROUGH TESTIMONIALS:
"Page 22 changed my entire financial reality" - Robert L., Florida
"Maria's guidance brought me $40K in unexpected income" - Diana P., Nevada

*** YOUR CUSTOM ACTIVATION IS READY:
Personal Wealth Frequency Attunement designed for your energy signature`
        ];

        // URLs –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –ú–∞—Ä–∏–∏ (5 —Ä–∞–∑–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏)
        const mariaPhotos = [
            "https://images.unsplash.com/photo-1494790108755-2616c28ca2ad?w=200&h=250&fit=crop&crop=face", // Professional woman 1
            "https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=200&h=250&fit=crop&crop=face", // Professional woman 2
            "https://images.unsplash.com/photo-1580489944761-15a19d654956?w=200&h=250&fit=crop&crop=face", // Professional woman 3
            "https://images.unsplash.com/photo-1607746882042-944635dfe10e?w=200&h=250&fit=crop&crop=face", // Professional woman 4
            "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=200&h=250&fit=crop&crop=face"  // Professional woman 5
        ];

        // –ü–æ–¥–ø–∏—Å–∏ –∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º –ú–∞—Ä–∏–∏ (—Ç–æ–∂–µ —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è)
        const mariaPhotoCaptions = [
            "Maria channeling ancient prosperity energies in her sacred space in Romania",
            "Maria during her morning abundance meditation ritual - 5 AM daily practice",
            "Maria with the sacred Orthodox icons that amplify her transmissions",
            "Maria after successful $100K manifestation for client - pure joy energy",
            "Maria connecting with her ancestral lineage for your wealth activation"
        ];

        const triggers = [
            "Today's energy peak: This blessing is most powerful in the next 6 hours",
            "Sarah from Texas: 'Page 7 changed everything - $50K in 2 weeks!'",
            "Only 1% of souls are ready for this ancient activation",
            "Your soul frequency matches this blessing for only 24 hours",
            "Maria sensed your readiness level from 5000 miles away..."
        ];

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            setTimeout(() => {
                successDiv.style.display = 'none';
            }, 5000);
        }

        function initializeBlessings() {
            const editor = document.getElementById('blessingEditor');
            
            if (!editor) {
                showError('Failed to initialize blessing editor');
                return;
            }
            
            // Initialize blessings
            for (let i = 1; i <= 30; i++) {
                const card = document.createElement('div');
                card.className = 'blessing-card';
                
                const dayOfWeek = daysOfWeek[(i - 1) % 7];
                
                card.innerHTML = `
                    <label for="blessing${i}">Day ${i} - ${dayOfWeek}:</label>
                    <textarea id="blessing${i}" placeholder="Enter blessing text...">${defaultBlessings[i - 1] || ''}</textarea>
                `;
                
                editor.appendChild(card);
            }
            
            // Initialize cases editor
            const casesEditor = document.getElementById('casesEditor');
            if (casesEditor) {
                const templateNames = ['Business Women', 'Families/Moms', 'Young People', 'Spiritual Seekers', 'General Success'];
                
                for (let i = 1; i <= 5; i++) {
                    const card = document.createElement('div');
                    card.className = 'case-card';
                    
                    card.innerHTML = `
                        <label for="case${i}">Template ${i} - ${templateNames[i-1]}:</label>
                        <textarea id="case${i}" placeholder="Enter case template...">${defaultCases[i - 1] || ''}</textarea>
                    `;
                    
                    casesEditor.appendChild(card);
                }
            }
        }

        function updateProgress(percentage) {
            const progressBar = document.getElementById('progressBar');
            const progressFill = document.getElementById('progressFill');
            
            if (progressBar && progressFill) {
                progressBar.style.display = 'block';
                progressFill.style.width = Math.min(100, Math.max(0, percentage)) + '%';
            }
        }

        function createPageText(pageNumber, blessing, whatsapp, email) {
            const dayOfWeek = daysOfWeek[(pageNumber - 1) % 7];
            const triggerIndex = Math.floor((pageNumber - 1) / 5) % triggers.length;
            const trigger = triggers[triggerIndex];
            
            // Get bottom case text (rotate through 5 templates)
            const caseIndex = (pageNumber - 1) % 5;
            const caseElement = document.getElementById(`case${caseIndex + 1}`);
            const caseText = caseElement ? caseElement.value.trim() : '';
            const finalCaseText = caseText || defaultCases[caseIndex] || '';
            
            // Get Maria's photo caption for this page
            const photoCaption = mariaPhotoCaptions[caseIndex];
            
            // –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–±–∏—Ä–∞–µ–º —É—Å–ª–æ–≤–∏–µ –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Ç—Ä–∏–≥–≥–µ—Ä —Ç–æ–ª—å–∫–æ –∫–∞–∂–¥—ã–µ 5 —Å—Ç—Ä–∞–Ω–∏—Ü
            const triggerSection = pageNumber % 5 === 0 ? `\n*** ${trigger}\n` : '\n';
            
            return `*** DAY ${pageNumber} - ${dayOfWeek} ***

*** MARIA'S SACRED TRANSMISSION FOR YOU:
"${blessing}"
~ Channeled through 1500 years of Orthodox power ~

*** DIVINE MESSAGE:
You were guided to this page for a reason. The Universe orchestrated this moment because you're READY for your million-dollar breakthrough. This blessing resonated with you TODAY - that's divine timing, not coincidence.

*** MY MONEY INTENTION TODAY:
________________________________
________________________________

*** ABUNDANCE SIGNS I NOTICED:
Morning: _________________
Afternoon: _______________
Evening: _________________

*** GRATITUDE FOR WHAT I RECEIVED:
________________________________

*** FEELING THE CALL FOR MORE?
This blessing is just the beginning... There are deeper layers waiting.
Ready for your FULL million-dollar activation?
-> Text Maria on WhatsApp: ${whatsapp}
-> Or email: ${email}

*** P.S. The fact that you felt drawn to page ${pageNumber} tells Maria everything about your spiritual readiness level...
${triggerSection}
${finalCaseText}

*** PERSONAL MESSAGE FROM MARIA:
"${photoCaption}"

*** SACRED REMINDER:
Your energy signature called you to this exact page. This is divine orchestration.
Trust the process. Your breakthrough is already written in the stars.

WhatsApp Maria: ${whatsapp} | Email: ${email}

Page ${pageNumber}`;
        }

        function previewPage(pageNumber) {
            const whatsapp = document.getElementById('whatsapp').value || '[WhatsApp Number]';
            const email = document.getElementById('email').value || 'info@draculamystictour.com';
            const blessingElement = document.getElementById(`blessing${pageNumber}`);
            const blessing = blessingElement ? blessingElement.value.trim() : '';
            const finalBlessing = blessing || defaultBlessings[pageNumber - 1] || `Default blessing for day ${pageNumber}`;
            
            const previewDiv = document.getElementById('pagePreview');
            previewDiv.innerHTML = `<pre style="white-space: pre-wrap; text-align: left; font-family: Georgia, serif; line-height: 1.5;">${createPageText(pageNumber, finalBlessing, whatsapp, email)}</pre>`;
            previewDiv.style.display = 'block';
        }

        async function generatePDF() {
            console.log('Starting PDF generation with jsPDF...');
            
            const generateBtn = document.getElementById('generateBtn');
            const loadingMessage = document.getElementById('loadingMessage');
            const currentPageSpan = document.getElementById('currentPage');
            const whatsapp = document.getElementById('whatsapp').value || '[WhatsApp Number]';
            const email = document.getElementById('email').value;
            
            if (!email.trim()) {
                showError('Please enter an email address');
                return;
            }
            
            if (typeof jsPDF === 'undefined') {
                showError('PDF library not loaded. Please refresh the page and try again.');
                return;
            }
            
            generateBtn.disabled = true;
            loadingMessage.style.display = 'block';
            
            try {
                updateProgress(5);
                
                // Collect all blessings
                const blessings = [];
                for (let i = 1; i <= 30; i++) {
                    const blessingElement = document.getElementById(`blessing${i}`);
                    const blessing = blessingElement ? blessingElement.value.trim() : '';
                    blessings.push(blessing || defaultBlessings[i - 1] || `Default blessing for day ${i}`);
                }
                
                console.log(`Collected ${blessings.length} blessings`);
                updateProgress(10);
                
                // Create PDF with 9x15 inch size (228.6 x 381 mm)
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: [228.6, 381] // 9x15 inches in mm
                });
                
                console.log('PDF created with format 9x15 inches');
                
                // Generate each page
                for (let i = 0; i < 30; i++) {
                    if (i > 0) {
                        pdf.addPage();
                    }
                    
                    currentPageSpan.textContent = i + 1;
                    
                    // Set background color to dark blue
                    pdf.setFillColor(26, 26, 46); // #1a1a2e
                    pdf.rect(0, 0, 228.6, 381, 'F'); // Fill entire page
                    
                    // Set text color to white
                    pdf.setTextColor(255, 255, 255);
                    pdf.setFont('times', 'normal');
                    pdf.setFontSize(12);
                    
                    const pageText = createPageText(i + 1, blessings[i], whatsapp, email);
                    const lines = pdf.splitTextToSize(pageText, 200); // Adjusted for wider page
                    
                    let yPosition = 25;
                    const lineHeight = 6;
                    
                    // Reserve space for Maria's photo at the bottom
                    const maxTextHeight = 280; // Leave space for photo + caption
                    
                    lines.forEach(line => {
                        if (yPosition > maxTextHeight) {
                            return;
                        }
                        
                        // Check for special formatting
                        if (line.includes('*** DAY')) {
                            pdf.setTextColor(255, 215, 0); // Gold color
                            pdf.setFontSize(16);
                            pdf.setFont('times', 'bold');
                        } else if (line.includes('*** MARIA\'S SACRED') || line.includes('*** DIVINE MESSAGE') || line.includes('*** MY MONEY') || line.includes('*** ABUNDANCE SIGNS') || line.includes('*** GRATITUDE') || line.includes('*** FEELING') || line.includes('*** RECENT SACRED') || line.includes('*** YOUR PERSONAL') || line.includes('*** BREAKTHROUGH') || line.includes('*** SACRED FAMILY') || line.includes('*** READY FOR') || line.includes('*** MILLENNIAL MONEY') || line.includes('*** YOUR GENERATIONAL') || line.includes('*** DIVINE INTERVENTION') || line.includes('*** YOUR SOUL\'S') || line.includes('*** YOUR CUSTOM') || line.includes('*** PERSONAL MESSAGE') || line.includes('*** SACRED REMINDER')) {
                            pdf.setTextColor(255, 215, 0); // Gold color
                            pdf.setFontSize(13);
                            pdf.setFont('times', 'bold');
                        } else {
                            pdf.setTextColor(255, 255, 255); // White color
                            pdf.setFontSize(12);
                            pdf.setFont('times', 'normal');
                        }
                        
                        pdf.text(line, 25, yPosition);
                        yPosition += lineHeight;
                    });
                    
                    // Add Maria's photo at the bottom
                    try {
                        const photoIndex = i % 5;
                        const photoUrl = mariaPhotos[photoIndex];
                        
                        // Create a placeholder for the photo (since we can't load external images in jsPDF easily)
                        // Draw a golden rectangle as photo placeholder
                        pdf.setFillColor(255, 215, 0); // Gold color
                        pdf.rect(70, 300, 60, 75, 'F'); // Photo placeholder rectangle
                        
                        // Add photo frame
                        pdf.setDrawColor(255, 255, 255);
                        pdf.setLineWidth(1);
                        pdf.rect(68, 298, 64, 79); // White frame around photo
                        
                        // Add "MARIA" text in the photo area
                        pdf.setTextColor(26, 26, 46); // Dark text on gold background
                        pdf.setFont('times', 'bold');
                        pdf.setFontSize(16);
                        pdf.text('MARIA', 85, 340);
                        
                        // Add photo caption below
                        pdf.setTextColor(255, 215, 0); // Gold color
                        pdf.setFont('times', 'italic');
                        pdf.setFontSize(10);
                        const caption = mariaPhotoCaptions[photoIndex];
                        const captionLines = pdf.splitTextToSize(caption, 180);
                        let captionY = 385;
                        captionLines.forEach(captionLine => {
                            if (captionY < 395) {
                                pdf.text(captionLine, 25, captionY);
                                captionY += 5;
                            }
                        });
                        
                    } catch (photoError) {
                        console.log('Photo placement error:', photoError);
                    }
                    
                    updateProgress(10 + ((i + 1) / 30) * 85);
                    
                    // Small delay to prevent browser freeze
                    if (i % 5 === 0) {
                        await new Promise(resolve => setTimeout(resolve, 100));
                    }
                }
                
                updateProgress(98);
                
                // Save the PDF
                pdf.save('Sacred_Million_Dollar_Activation_30_Pages_9x15.pdf');
                
                updateProgress(100);
                console.log('PDF generated successfully!');
                showSuccess('PDF —Å 30 —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ (9x15 –¥—é–π–º–æ–≤) —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –∏ —Å–∫–∞—á–∞–Ω!');
                
            } catch (error) {
                console.error('PDF generation error:', error);
                showError(`PDF generation failed: ${error.message}`);
            } finally {
                generateBtn.disabled = false;
                loadingMessage.style.display = 'none';
                
                setTimeout(() => {
                    const progressBar = document.getElementById('progressBar');
                    const progressFill = document.getElementById('progressFill');
                    if (progressBar && progressFill) {
                        progressBar.style.display = 'none';
                        progressFill.style.width = '0%';
                    }
                }, 2000);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            try {
                initializeBlessings();
                console.log('Application initialized successfully');
            } catch (error) {
                console.error('Initialization error:', error);
                showError('Failed to initialize application');
            }
        });

        // Global error handler
        window.addEventListener('error', function(event) {
            console.error('Global error:', event.error);
            showError('An unexpected error occurred. Please refresh the page.');
        });
    </script>
</body>
</html>
